{"ast":null,"code":"import axios from \"axios\";\nconst BASE_URL = 'http://localhost:5001/api/v1/';\nconst PEAKS_URL = BASE_URL + 'peaks/';\nconst AUTH_URL = BASE_URL + 'auth/';\nconst LOGIN_URL = AUTH_URL + 'login';\nconst ADD_USER_URL = AUTH_URL + 'register';\nconst GET_USER_URL = BASE_URL + 'auth/me';\nconst UPDATE_USER_URL = AUTH_URL + 'updatedetails'; // export const getPeakData = async (id) => {\n//     try {\n//         let response  = await axios.get(`${PEAKS_URL}${id}`);\n//         if(response.data.success) {\n//             response = response.data.data;\n//             return response;\n//         }\n//     } catch (error) {\n//         console.error(error);\n//         throw error;\n//     }\n// }\n\nclass User {\n  constructor() {\n    this.id = '';\n    this.name = '';\n    this.email = '';\n    this.role = '';\n    this.isLoggedIn = false;\n  }\n\n  setUserEmail(email) {\n    this.email = email;\n  }\n\n  setIsLoggedIn(loggedIn) {\n    this.isLoggedIn = loggedIn;\n  }\n\n  setUserData(userData) {\n    const {\n      email,\n      name,\n      role,\n      _id\n    } = userData;\n    this.id = _id;\n    this.name = name;\n    this.email = email;\n    this.role = role;\n  }\n\n}\n\nexport class AuthService extends User {\n  constructor() {\n    super();\n\n    this.getBearerHeader = () => this.bearerHeader;\n\n    this.getUserData = async () => {\n      const headers = this.getBearerHeader();\n\n      try {\n        const response = await axios.get(GET_USER_URL, {\n          headers\n        });\n        return response.data.data;\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    this.loginUser = async (email, password) => {\n      const headers = this.getBearerHeader();\n      const body = {\n        \"email\": email.toLowerCase(),\n        \"password\": password\n      };\n\n      try {\n        const response = await axios.post(LOGIN_URL, body, {\n          headers\n        });\n        this.setAuthToken(response.data.token);\n        this.setBearerHeader(response.data.token);\n        this.setIsLoggedIn(true);\n        const data = await this.getUserData();\n        this.setUserData(data);\n      } catch (error) {\n        console.error(error);\n        throw error;\n      }\n\n      ;\n    };\n\n    this.createUser = async (name, email, password) => {\n      const headers = this.getBearerHeader();\n      const body = {\n        \"name\": name,\n        \"email\": email.toLowerCase(),\n        \"password\": password\n      };\n\n      try {\n        const response = await axios.post(ADD_USER_URL, body, {\n          headers\n        });\n        this.setAuthToken(response.data.token);\n        this.setBearerHeader(response.data.token);\n        this.setIsLoggedIn(true);\n        const data = await this.getUserData();\n        this.setUserData(data);\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    this.editUser = async newUserInfo => {\n      const headers = this.getBearerHeader();\n      const body = newUserInfo;\n\n      try {\n        //const response =\n        await axios.put(UPDATE_USER_URL, body, {\n          headers\n        });\n        const data = await this.getUserData();\n        this.setUserData(data);\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    this.authToken = '';\n    this.bearerHeader = {};\n  }\n\n  logoutUser() {\n    this.id = '';\n    this.name = '';\n    this.email = '';\n    this.role = '';\n    this.isLoggedIn = false;\n    this.authToken = '';\n    this.bearerHeader = {};\n  }\n\n  setAuthToken(token) {\n    this.authToken = token;\n  }\n\n  setBearerHeader(token) {\n    this.bearerHeader = {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    };\n  }\n\n}\nexport class PeakService {\n  constructor(authHeader) {\n    this.getAllPeaks = async () => {\n      try {\n        let response = await axios.get(PEAKS_URL);\n\n        if (response.data.success) {\n          response = response.data.data.map(peak => ({\n            id: peak._id,\n            name: peak.name,\n            elevation: peak.elevation,\n            forest: peak.forest,\n            range: peak.range,\n            rank: peak.rank,\n            photo: peak.photo,\n            numberOfRoutes: peak.routes.length,\n            routes: peak.routes\n          }));\n          this.peaks = response;\n          return this.peaks;\n        }\n      } catch (err) {\n        console.error(err);\n        throw err;\n      }\n\n      ;\n    };\n\n    this.getPeakById = id => {\n      const selectedPeak = this.peaks.filter(peak => peak.id === id);\n      return selectedPeak;\n    };\n\n    this.getAuthHeader = authHeader;\n    this.peaks = [];\n  }\n\n}","map":{"version":3,"names":["axios","BASE_URL","PEAKS_URL","AUTH_URL","LOGIN_URL","ADD_USER_URL","GET_USER_URL","UPDATE_USER_URL","User","constructor","id","name","email","role","isLoggedIn","setUserEmail","setIsLoggedIn","loggedIn","setUserData","userData","_id","AuthService","getBearerHeader","bearerHeader","getUserData","headers","response","get","data","error","console","loginUser","password","body","toLowerCase","post","setAuthToken","token","setBearerHeader","createUser","editUser","newUserInfo","put","authToken","logoutUser","PeakService","authHeader","getAllPeaks","success","map","peak","elevation","forest","range","rank","photo","numberOfRoutes","routes","length","peaks","err","getPeakById","selectedPeak","filter","getAuthHeader"],"sources":["/Users/calvingilbert/my-code/personal-proj/14ers/fourteeners-app/src/services.js"],"sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = 'http://localhost:5001/api/v1/';\nconst PEAKS_URL = BASE_URL + 'peaks/';\nconst AUTH_URL = BASE_URL + 'auth/';\nconst LOGIN_URL = AUTH_URL + 'login';\nconst ADD_USER_URL = AUTH_URL + 'register';\nconst GET_USER_URL = BASE_URL + 'auth/me';\nconst UPDATE_USER_URL = AUTH_URL + 'updatedetails';\n\n// export const getPeakData = async (id) => {\n//     try {\n//         let response  = await axios.get(`${PEAKS_URL}${id}`);\n//         if(response.data.success) {\n//             response = response.data.data;\n//             return response;\n//         }\n//     } catch (error) {\n//         console.error(error);\n//         throw error;\n//     }\n// }\n\nclass User {\n    constructor() {\n        this.id = '';\n        this.name = '';\n        this.email = '';\n        this.role = '';\n        this.isLoggedIn = false;\n    }\n\n    setUserEmail(email) {this.email = email; }\n    setIsLoggedIn(loggedIn) { this.isLoggedIn = loggedIn; }\n\n    setUserData(userData) {\n       const { email, name, role, _id } = userData;\n        this.id = _id; \n        this.name = name;\n        this.email = email;\n        this.role = role;\n    }\n}\n\nexport class AuthService extends User {\n    constructor() {\n        super();\n        this.authToken = '';\n        this.bearerHeader = {};\n    }\n\n    logoutUser() {\n        this.id = '';\n        this.name = '';\n        this.email = '';\n        this.role = '';\n        this.isLoggedIn = false;\n        this.authToken = '';\n        this.bearerHeader = {};\n    }\n\n    setAuthToken(token) { this.authToken = token; }\n\n    setBearerHeader(token) {\n        this.bearerHeader = {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`,\n        }\n    }\n\n    getBearerHeader = () => this.bearerHeader;\n\n    getUserData = async () => {\n        const headers = this.getBearerHeader();\n        try {\n            const response = await axios.get(GET_USER_URL, { headers });\n            return response.data.data\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n    loginUser = async (email, password) => {\n        const headers = this.getBearerHeader();\n        const body = { \"email\": email.toLowerCase(), \"password\": password };\n        try {\n            const response = await axios.post(LOGIN_URL, body, { headers });\n            this.setAuthToken(response.data.token);\n            this.setBearerHeader(response.data.token);\n            this.setIsLoggedIn(true);\n            const data = await this.getUserData();\n            this.setUserData(data);\n        } catch (error) {\n            console.error(error);\n            throw error;\n        };\n    };\n\n    createUser = async (name, email, password) => {\n        const headers = this.getBearerHeader();\n        const body = { \n            \"name\": name, \n            \"email\": email.toLowerCase(), \n            \"password\": password \n        };\n\n        try {\n            const response = await axios.post(ADD_USER_URL, body, { headers });\n            this.setAuthToken(response.data.token);\n            this.setBearerHeader(response.data.token);\n            this.setIsLoggedIn(true);\n            const data = await this.getUserData();\n            this.setUserData(data);\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n    editUser = async (newUserInfo) => {\n        const headers = this.getBearerHeader();\n        const body = newUserInfo;\n\n        try {\n            //const response =\n            await axios.put(UPDATE_USER_URL, body, { headers });\n            const data = await this.getUserData();\n            this.setUserData(data);\n        } catch (error) {\n            console.error(error);\n        }\n    }\n}\n\nexport class PeakService {\n    constructor(authHeader){\n        this.getAuthHeader = authHeader;\n        this.peaks = [];\n    }\n\n    getAllPeaks = async () => {\n        try {\n            let response = await axios.get(PEAKS_URL);\n            if(response.data.success){\n                response = response.data.data.map((peak) => ({\n                    id: peak._id,\n                    name: peak.name,\n                    elevation: peak.elevation,\n                    forest: peak.forest,\n                    range: peak.range,\n                    rank: peak.rank,\n                    photo: peak.photo,\n                    numberOfRoutes: peak.routes.length,\n                    routes: peak.routes\n                }));\n                this.peaks = response;\n                return this.peaks;\n            }\n        } catch (err) {\n            console.error(err);\n            throw err;\n        };\n    };\n\n    getPeakById = (id) => {\n        const selectedPeak = this.peaks.filter((peak) => peak.id === id);\n        return selectedPeak;\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}