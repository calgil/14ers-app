{"ast":null,"code":"import axios from \"axios\"; // local\n// const BASE_URL = 'http://localhost:3001/api/v1/';\n// url of other host\n\nconst BASE_URL = 'http://localhost:5001/api/v1/';\nconst PEAKS_URL = BASE_URL + 'peaks';\nconst LOGIN_URL = BASE_URL + 'auth/login';\nconst GET_USER_URL = BASE_URL + 'auth/me'; // let mountains = [];\n\nexport const getAllPeaks = async () => {\n  try {\n    let response = await axios.get(PEAKS_URL);\n    response = response.data.data.map(peak => ({\n      id: peak._id,\n      name: peak.name,\n      elevation: peak.elevation,\n      forest: peak.forest,\n      range: peak.range,\n      rank: peak.rank,\n      photo: peak.photo,\n      numberOfRoutes: peak.routes.length,\n      routes: peak.routes\n    }));\n    return response;\n  } catch (err) {\n    console.error(err);\n  }\n\n  ;\n};\n\nclass User {\n  constructor() {\n    this.id = '';\n    this.name = '';\n    this.email = '';\n    this.role = '';\n    this.isLoggedIn = false;\n  }\n\n  setUserEmail(email) {\n    this.email = email;\n  }\n\n  setIsLoggedIn(loggedIn) {\n    this.isLoggedIn = loggedIn;\n  }\n\n  setUserData(userData) {\n    console.log('set data', userData);\n    const {\n      email,\n      name,\n      role,\n      _id\n    } = userData;\n    this.id = _id;\n    this.name = name;\n    this.email = email;\n    this.role = role;\n  }\n\n}\n\nexport class AuthService extends User {\n  constructor() {\n    super();\n\n    this.getBearerHeader = () => this.bearerHeader;\n\n    this.getUserData = async () => {\n      const headers = this.getBearerHeader();\n\n      try {\n        const response = await axios.get(GET_USER_URL, {\n          headers\n        });\n        this.setUserData(response.data.data);\n        console.log('get data', response.data.data);\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    this.loginUser = async (email, password) => {\n      const body = {\n        \"email\": email.toLowerCase(),\n        \"password\": password\n      };\n\n      try {\n        const response = await axios.post(LOGIN_URL, body, {\n          'Content-Type': 'application/json'\n        });\n        this.setAuthToken(response.data.token);\n        this.setBearerHeader(response.data.token);\n        this.setIsLoggedIn(true);\n        await this.getUserData();\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    this.authToken = '';\n    this.bearerHeader = {};\n  }\n\n  logoutUser() {\n    this.id = '';\n    this.name = '';\n    this.email = '';\n    this.role = '';\n    this.isLoggedIn = false;\n    this.authToken = '';\n    this.bearerHeader = {};\n  }\n\n  setAuthToken(token) {\n    this.authToken = token;\n  }\n\n  setBearerHeader(token) {\n    this.bearerHeader = {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    };\n  }\n\n}","map":{"version":3,"names":["axios","BASE_URL","PEAKS_URL","LOGIN_URL","GET_USER_URL","getAllPeaks","response","get","data","map","peak","id","_id","name","elevation","forest","range","rank","photo","numberOfRoutes","routes","length","err","console","error","User","constructor","email","role","isLoggedIn","setUserEmail","setIsLoggedIn","loggedIn","setUserData","userData","log","AuthService","getBearerHeader","bearerHeader","getUserData","headers","loginUser","password","body","toLowerCase","post","setAuthToken","token","setBearerHeader","authToken","logoutUser"],"sources":["/Users/calvingilbert/my-code/personal-proj/14ers/14ers-app/14ers-app/src/services.js"],"sourcesContent":["import axios from \"axios\";\n\n// local\n// const BASE_URL = 'http://localhost:3001/api/v1/';\n// url of other host\nconst BASE_URL = 'http://localhost:5001/api/v1/';\nconst PEAKS_URL = BASE_URL + 'peaks';\nconst LOGIN_URL = BASE_URL + 'auth/login';\nconst GET_USER_URL = BASE_URL + 'auth/me';\n\n// let mountains = [];\n\nexport const getAllPeaks = async () => {\n    try {\n        let response = await axios.get(PEAKS_URL);\n        response = response.data.data.map((peak) => ({\n            id: peak._id,\n            name: peak.name,\n            elevation: peak.elevation,\n            forest: peak.forest,\n            range: peak.range,\n            rank: peak.rank,\n            photo: peak.photo,\n            numberOfRoutes: peak.routes.length,\n            routes: peak.routes\n        }));\n        return response;\n    } catch (err) {\n        console.error(err);\n    };\n};\n\nclass User {\n    constructor() {\n        this.id = '';\n        this.name = '';\n        this.email = '';\n        this.role = '';\n        this.isLoggedIn = false;\n    }\n\n    setUserEmail(email) {this.email = email; }\n    setIsLoggedIn(loggedIn) { this.isLoggedIn = loggedIn; }\n\n    setUserData(userData) {\n        console.log('set data', userData);\n       const { email, name, role, _id } = userData;\n        this.id = _id; \n        this.name = name;\n        this.email = email;\n        this.role = role;\n    }\n}\n\nexport class AuthService extends User {\n    constructor() {\n        super();\n        this.authToken = '';\n        this.bearerHeader = {};\n    }\n\n    logoutUser() {\n        this.id = '';\n        this.name = '';\n        this.email = '';\n        this.role = '';\n        this.isLoggedIn = false;\n        this.authToken = '';\n        this.bearerHeader = {};\n    }\n\n    setAuthToken(token) { this.authToken = token; }\n\n    setBearerHeader(token) {\n        this.bearerHeader = {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`,\n        }\n    }\n\n    getBearerHeader = () => this.bearerHeader;\n\n    getUserData = async () => {\n        const headers = this.getBearerHeader();\n        try {\n            const response = await axios.get(GET_USER_URL, { headers });\n            this.setUserData(response.data.data);\n            console.log('get data', response.data.data);\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n    loginUser = async (email, password) => {\n        const body = { \"email\": email.toLowerCase(), \"password\": password };\n        try {\n            const response = await axios.post(LOGIN_URL, body, {\n                'Content-Type': 'application/json'\n            });\n            this.setAuthToken(response.data.token);\n            this.setBearerHeader(response.data.token);\n            this.setIsLoggedIn(true);\n            await this.getUserData();\n        } catch (error) {\n            console.error(error)\n        }\n    }\n}\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CAEA;AACA;AACA;;AACA,MAAMC,QAAQ,GAAG,+BAAjB;AACA,MAAMC,SAAS,GAAGD,QAAQ,GAAG,OAA7B;AACA,MAAME,SAAS,GAAGF,QAAQ,GAAG,YAA7B;AACA,MAAMG,YAAY,GAAGH,QAAQ,GAAG,SAAhC,C,CAEA;;AAEA,OAAO,MAAMI,WAAW,GAAG,YAAY;EACnC,IAAI;IACA,IAAIC,QAAQ,GAAG,MAAMN,KAAK,CAACO,GAAN,CAAUL,SAAV,CAArB;IACAI,QAAQ,GAAGA,QAAQ,CAACE,IAAT,CAAcA,IAAd,CAAmBC,GAAnB,CAAwBC,IAAD,KAAW;MACzCC,EAAE,EAAED,IAAI,CAACE,GADgC;MAEzCC,IAAI,EAAEH,IAAI,CAACG,IAF8B;MAGzCC,SAAS,EAAEJ,IAAI,CAACI,SAHyB;MAIzCC,MAAM,EAAEL,IAAI,CAACK,MAJ4B;MAKzCC,KAAK,EAAEN,IAAI,CAACM,KAL6B;MAMzCC,IAAI,EAAEP,IAAI,CAACO,IAN8B;MAOzCC,KAAK,EAAER,IAAI,CAACQ,KAP6B;MAQzCC,cAAc,EAAET,IAAI,CAACU,MAAL,CAAYC,MARa;MASzCD,MAAM,EAAEV,IAAI,CAACU;IAT4B,CAAX,CAAvB,CAAX;IAWA,OAAOd,QAAP;EACH,CAdD,CAcE,OAAOgB,GAAP,EAAY;IACVC,OAAO,CAACC,KAAR,CAAcF,GAAd;EACH;;EAAA;AACJ,CAlBM;;AAoBP,MAAMG,IAAN,CAAW;EACPC,WAAW,GAAG;IACV,KAAKf,EAAL,GAAU,EAAV;IACA,KAAKE,IAAL,GAAY,EAAZ;IACA,KAAKc,KAAL,GAAa,EAAb;IACA,KAAKC,IAAL,GAAY,EAAZ;IACA,KAAKC,UAAL,GAAkB,KAAlB;EACH;;EAEDC,YAAY,CAACH,KAAD,EAAQ;IAAC,KAAKA,KAAL,GAAaA,KAAb;EAAqB;;EAC1CI,aAAa,CAACC,QAAD,EAAW;IAAE,KAAKH,UAAL,GAAkBG,QAAlB;EAA6B;;EAEvDC,WAAW,CAACC,QAAD,EAAW;IAClBX,OAAO,CAACY,GAAR,CAAY,UAAZ,EAAwBD,QAAxB;IACD,MAAM;MAAEP,KAAF;MAASd,IAAT;MAAee,IAAf;MAAqBhB;IAArB,IAA6BsB,QAAnC;IACC,KAAKvB,EAAL,GAAUC,GAAV;IACA,KAAKC,IAAL,GAAYA,IAAZ;IACA,KAAKc,KAAL,GAAaA,KAAb;IACA,KAAKC,IAAL,GAAYA,IAAZ;EACH;;AAnBM;;AAsBX,OAAO,MAAMQ,WAAN,SAA0BX,IAA1B,CAA+B;EAClCC,WAAW,GAAG;IACV;;IADU,KAyBdW,eAzBc,GAyBI,MAAM,KAAKC,YAzBf;;IAAA,KA2BdC,WA3Bc,GA2BA,YAAY;MACtB,MAAMC,OAAO,GAAG,KAAKH,eAAL,EAAhB;;MACA,IAAI;QACA,MAAM/B,QAAQ,GAAG,MAAMN,KAAK,CAACO,GAAN,CAAUH,YAAV,EAAwB;UAAEoC;QAAF,CAAxB,CAAvB;QACA,KAAKP,WAAL,CAAiB3B,QAAQ,CAACE,IAAT,CAAcA,IAA/B;QACAe,OAAO,CAACY,GAAR,CAAY,UAAZ,EAAwB7B,QAAQ,CAACE,IAAT,CAAcA,IAAtC;MACH,CAJD,CAIE,OAAOgB,KAAP,EAAc;QACZD,OAAO,CAACC,KAAR,CAAcA,KAAd;MACH;IACJ,CApCa;;IAAA,KAsCdiB,SAtCc,GAsCF,OAAOd,KAAP,EAAce,QAAd,KAA2B;MACnC,MAAMC,IAAI,GAAG;QAAE,SAAShB,KAAK,CAACiB,WAAN,EAAX;QAAgC,YAAYF;MAA5C,CAAb;;MACA,IAAI;QACA,MAAMpC,QAAQ,GAAG,MAAMN,KAAK,CAAC6C,IAAN,CAAW1C,SAAX,EAAsBwC,IAAtB,EAA4B;UAC/C,gBAAgB;QAD+B,CAA5B,CAAvB;QAGA,KAAKG,YAAL,CAAkBxC,QAAQ,CAACE,IAAT,CAAcuC,KAAhC;QACA,KAAKC,eAAL,CAAqB1C,QAAQ,CAACE,IAAT,CAAcuC,KAAnC;QACA,KAAKhB,aAAL,CAAmB,IAAnB;QACA,MAAM,KAAKQ,WAAL,EAAN;MACH,CARD,CAQE,OAAOf,KAAP,EAAc;QACZD,OAAO,CAACC,KAAR,CAAcA,KAAd;MACH;IACJ,CAnDa;;IAEV,KAAKyB,SAAL,GAAiB,EAAjB;IACA,KAAKX,YAAL,GAAoB,EAApB;EACH;;EAEDY,UAAU,GAAG;IACT,KAAKvC,EAAL,GAAU,EAAV;IACA,KAAKE,IAAL,GAAY,EAAZ;IACA,KAAKc,KAAL,GAAa,EAAb;IACA,KAAKC,IAAL,GAAY,EAAZ;IACA,KAAKC,UAAL,GAAkB,KAAlB;IACA,KAAKoB,SAAL,GAAiB,EAAjB;IACA,KAAKX,YAAL,GAAoB,EAApB;EACH;;EAEDQ,YAAY,CAACC,KAAD,EAAQ;IAAE,KAAKE,SAAL,GAAiBF,KAAjB;EAAyB;;EAE/CC,eAAe,CAACD,KAAD,EAAQ;IACnB,KAAKT,YAAL,GAAoB;MAChB,gBAAgB,kBADA;MAEhB,iBAAkB,UAASS,KAAM;IAFjB,CAApB;EAIH;;AAxBiC"},"metadata":{},"sourceType":"module"}